% -*- root: ../GeometriaDiferencial.tex -*-
\chapter{Integración en variedades: teorema de Stokes}

Ahora lo que vamos a querer va a ser integrar en variedades. La cuestión es que tenemos un problema: las variedades se definen ``a cachos'', usando cartas (ver definición de variedad en \ref{defVariedadDiferenciable}). Luego vamos a tener que adaptar las integrales que ya conocemos para que funcionen bien en las cartas. Necesitaremos entonces las particiones de la unidad: una forma de decir cuánto peso le damos a cada carta en cada punto para que todo sea continuo, bonito y magnífico.

\section{Particiones de la unidad}

\begin{figure}[hbtp]
\centering
\inputtikz{IV_ParticionesUnidad}
\caption{Las ``montañas'' son las particiones $ρ_i$ de la unidad que buscamos, funciones que para cada $U_i$ (el disco debajo de cada montaña) nos dan una ponderación determinada, de tal forma que la suma de todos los $ρ_i$ en un determinado punto es uno. Si estamos en un punto de la variedad que sólo está cubierto por una carta, entonces $ρ_i(x) = 1$. Si hay varias cartas, la unidad se divide dando un peso determinado a la partición de cada carta.}
\label{figParticionesUnidad}
\end{figure}

\begin{defn}[Partición\IS de la unidad] Una partición de la unidad subordinada a un cubrimiento de cartas $U_i$ de una variedad $X = \bigcup U_i$ es una familia de funciones $ρ_i ∈ C^∞(X)$ tales que \begin{itemize}
\item $1 ≥ ρ_i ≥ 0$.
\item $\mop{sop} ρ_i ⊂ U_i$.\footnote{El soporte de $ρ_i$ es la clausura del conjunto de puntos en los que $ρ_i$ no es nula. Ver definición \ref{defSoporte}.}
\item $\sum_i ρ_i (x) = 1\quad ∀x∈X$.
\end{itemize}
\end{defn}

Para que esta definición tenga sentido, tiene que ocurrir que en todo punto sólo haya una cantidad finita de $ρ_i$ que no tengan valor nulo. Por facilitarnos las cosas, supondremos que $X$ es variedad compacta y que por lo tanto el cubrimiento $\set{U_i}_{i=1}^N$ es finito.

Usaremos las particiones de la unidad para pasar de información local a información global. Localmente, las variedades sólo son abiertos de $ℝ^n$, pero globalmente no son triviales.

Suponemos de momento que las particiones de la unidad existen en ciertas condiciones, y vamos a ver un ejemplo algo tonto. Queremos demostrar que si $X$ es una variedad compacta, existe en $X$ un campo $D$ que no es idénticamente nulo.

Tomamos un abierto $U_1 ⊂ X$ con coordenadas $x_1, \dotsc, x_n$. Un campo no nulo sería $D = \dpa{}{x_1}$. La cuestión es que este campo es local, sólo está definido en una carta, no en toda la variedad. Queremos extenderlo a $X$ de tal forma que no sea nulo en todo punto de $X$.

Lo que hacemos es tomar un cubrimiento que contenga a $U_1$ y hallamos una partición de la unidad subordinada a este cubrimiento. Tendremos entonces una función $ρ_1 ∈ C^∞(X)$ que es nula fuera de $U_1$ (segunda condición de partición), así que \[ \hat{D} ≝ ρ_1 D\] es un campo continuo definido en todo $X$ y que no es nulo en $U_1$.

\seprule

Para demostrar el teorema de existencia de particiones de la unidad, necesitaremos lemas adicionales.

\begin{lemma} Existe $\appl{φ}{\bola_3(0)}{ℝ}$, con $C^∞$ y  $\bola_3(0) ⊂ ℝ^n$, tal que
\begin{itemize}
\item $φ(p) = 1$ si $p ∈ \bola_1(0)$.
\item $φ(p) ∈ (0,1]$ si $p ∈ \bola_2 (0)$.
\item $φ(p) = 0$ si $p ∈ \bola_3(0) \setminus \bola_2 (0)$.
\end{itemize}
\end{lemma}

Esta función φ es una función ``meseta'' porque parece una meseta: el centro está elevado, luego baja y luego es cero. Un pequeño apunte es que estas funciones no son analíticas, así que si quisiésemos extender esto a varaible compleja lo tendríamos más difícil.

\begin{figure}[hbtp]
\centering
\inputtikz{IV_LemaI}
\caption{Esta es la función ``media meseta'' definida como β en la demostración}
\label{figIV_Lema1}
\end{figure}

\begin{proof}
Sea\footnote{O quizás no, porque me suena que el profesor lo puso mal en la pizarra y esa no es la función.} \[ α(t) ≝ e^{-\frac{1}{(t+1)(t+2)}} \] con $t ∈ (-2, -1) \setminus \set{0}$. Definimos también su integral \[ γ(t) ≝ \int_{-∞}^t α(s) \dif s \] y el valor en todo el intervalo \[ A = \int_{-2}^{-1}α(s) \dif s \]. Por último, haremos una ``normalización'' de la integral: $β(t) ≝ \frac{γ(t)}{A}$.

Esta función $β$ va a tener forma de ``media meseta'' (ver figura \ref{figIV_Lema1}), lo que podemos usar para construir la $φ$ que buscamos. De hecho, definiremos \[ φ(\vx) ≝ β(-\md{\vx}) \] con $\vx ∈ ℝ^n$.
\end{proof}

Con esto vamos a poder demostrar el teorema.

\begin{proof}
Tomamos, para $x∈X$, funciones $\appl{f_x}{\bola_3(0)}{X}$ tales que \[ f_x(\bola_3(0)) ≝ V_x ⊂ U_i \] (lema 2 que no he copiado). Se define ahora $w_x ≝ f_x(\bola_1(0)) ⊂ V_x ⊂ U_i$. Tenemos una colección no numerable de $w_x$, pero por compacidad puedo quedarme con un conjunto finito $\set{w_i}_{i=1}^N$ que recubren toda la variedad.

Definimos entonces las funciones \[ θ_i ≝ \appl{φ○\inv{f_i}}{V_i}{ℝ} \], que serían las ``mesetas'' en los abiertos $U_1$. En ese caso, ya tenemos las $φ_i$ dadas por \[ φ_i ≝ \frac{θ_i}{\sum_{j=1}^N θ_j}\]
\end{proof}
